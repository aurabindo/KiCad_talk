<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>PCB Design with KiCAD</title>

		<meta name="description" content="Basic overview of PCB design, using KiCad.">
		<meta name="author" content="Ian Rees">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>PCB Design with KiCad</h1>
                                </section>
                                <section>
                                    <h1>Example Project</h1>
                                    <p>
                                    A tool for measuring inductors.
                                    Inductors are important especially in circuits involving higher currents, but they can be hard to measure.
                                    </p>
                                    \[ V = L \frac{dI}{dt} \]
                                    <p>
                                    Or, in English, the voltage across the inductor is equal to it's inductance times the change in current through the inductor.
                                    This circuit will apply a constant voltage step, and allow us to measure \(dI/dt\) so we can find \(L\).
                                    </p>
                                    <ul>
                                    </ul>
                                    </p>
                                </section>
                                <section>
                                    <h1>Basic PCB Terminology</h1>
                                    <ul>
                                        <li><b>Solder Mask - </b>The green stuff.
                                        <li><b>Track - </b>Copper "wire" on the PCB.
                                        <li><b>Net - </b>Logical connection between points in a schematic.
                                        <li><b>Via - </b>Connection between tracks on different layers.
                                        <li><b>Footprint - </b>Provision for attaching a part to a PCB.
                                        <li><b>BOM - </b>Bill Of Materials (list of parts).
                                    </ul>
                                </section>
                                <section>
                                    <h1>Workflow</h1>
                                    <p>
                                    "KiCad" is a collection of several programs, each with their own role in the PCB design process.
                                    </p>

                                    <ul>
                                        <li><b>KiCad - </b>Organises projects / launches other programs
                                        <li><b>Eeschema - </b>Schematic capture
                                        <li><b>Pcbnew - </b>PCB Layout
                                        <li><b>GerbView - </b>Gerber file viewer
                                    </ul>
                                </section>
                                <section>
                                    <h1>KiCad</h1>
                                    <p>
                                    KiCad is designed around working on one project at a time, each PCB project is kept in it's own directory.
                                    </p>
                                </section>
                                <section>
                                    <section>
                                        <h1>Eeschema</h1>
                                        <center><small>Schematic Capture</small></center>
                                        <p>
                                        What is "schematic capture"?  It's all about drawing the schematic (aka circuit diagram), which produces the netlist and BOM.
                                        The netlist is required for PCB layout, or can be used for running simulations in <a href="http://ngspice.sourceforge.net/">SPICE</a>.
                                        More below.
                                        </p>
                                        <img src="media/eeschema.png" />
                                    </section>
                                    <section>
                                        <p>
                                        UI involves using keyboard + mouse, you'll want to learn some of the keyboard shortcuts.
                                        </p>
                                        <ul>
                                            <li>ESC - normal cursor
                                            <li>Return - repeat last
                                            <li>a - <em>A</em>dd component (defaults to last used)
                                            <li>m - <em>M</em>ove object (breaks connections)
                                            <li>g - <em>G</em>rab object (moves connections, tab for groups?)
                                            <li>p - <em>P</em>ower node
                                            <li>v - <em>V</em>alue of the part
                                            <li>w - <em>W</em>ire
                                        </ul>
                                    </section>
                                    <section>
                                        <p>
                                        Wires can be connected to other wires (filled green circles) or unconnected pins (square/circle outlines).
                                        </p><p>
                                        General workflow is to move cursor to start of wire, press 'w' key, draw wire, pressing 'w' to add corners, then click a node or press 'k' to end the wire.
                                        </p>
                                        <img src="media/wires.png" height="400px"/>
                                    </section>
                                        <section>
                                        <img src="media/555-nopower.png" />
                                        <p>
                                        Where are pins 1 and 8?
                                        Some parts have pins that are hidden by default - see the "Show hidden pins" button on the left.
                                        Make sure a net has name "VCC" to provide power to these.
                                        </p>
                                        <img src="media/show-hidden.png" />
                                    </section>
                                    <section>
                                        <p>
                                        Once the diagram has all required parts, "Annotate" it to change reference designators from C? to C123.
                                        </p>
                                        <p>
                                        Next, we need to associate the parts on the schematic with footprints for the PCB Layout tool.
                                        Run the CvPcb tool with the button at the top:
                                        </p>
                                        <img src="media/cvpcb.png" />
                                    </section>
                                    <section>
                                        <p>
                                        CvPcb shows three panes - the left pane is a list of parts libraries, the middle is the parts in your schematic, and the right is a list of parts that have passed through the current set of filters.
                                        Filters are enabled/disabled using the buttons at the top.
                                        Associate parts by highlighting your part in the middle, then double clicking the footprint on the right.
                                        </p>
                                        <img src="media/cvpcb-2.png" />
                                    </section>
                                    <section>
                                        <p>
                                        Once all the parts on your board are associated with footprints, click the "save" button and go back to Eeschema to export the netlist.
                                        Default settings should be fine for Pcbnew.
                                        </p>
                                        <img src="media/export-netlist.png" />
                                    </section>

                                </section>
                                <section>
                                    <section>
                                        <h1>Pcbnew - PCB Layout</h1>
                                        <center><small>The fun part!</small></center>
                                        <p>
                                        Pcbnew is the program where we do the actual circuit board layout.
                                        It takes a netlist from Eeschema and footprint information from the library, and helps you lay out a PCB.
                                        </p>
                                        <img src="media/pcbnew.png" />
                                    </section>
                                    <section>
                                        <h1>What am I looking at?</h1>
                                        <ul>
                                            <li>Thin white lines are the "Rat's nest".  These are connections that need to be made.
                                            <li>Different colours mostly represent different layers in the "stack up", but a few are intended to help with design or assembly.  See the bar on the right.
                                            <li>"Edge.Cuts" is the border of the PCB.
                                        </ul>
                                    </section>
                                    <section>
                                        <h1>Units</h1>
                                        <p>
                                        PCBs dimensions are often discussed in mils, which is prounounced "terrible unit".
                                        A mil is \(\frac{1 inch}{1000}\), <em>not</em> a millimeter.
                                        </p>
                                        <p>
                                        Things get especially fun with SMT package sizing eg 0603 Metric is equivalent to 0201 Imperial, about a third the size of the more common 0603 Imperial.
                                        </p>
                                        <p>
                                        You'll find some parts fit nicely on mm grids, and some fit nicely on inch grids.
                                        So, don't get too caught up on one system or another - it's very easy to switch the grid as desired.
                                        </p>
                                    </section>
                                    <section>
                                        <p>
                                        The first step using Pcbnew in a new project is importing the netlist from your earlier work in Eeschema.
                                        Click the "Read netlist" button to bring in your earlier work - it should be selected by default.
                                        You might get a few errors like these - we'll deal with them later:
                                        </p>
                                        <img src="media/pcbnew-import.png" />
                                    </section>
                                    <section>
                                        <p>
                                        Once your netlist is imported, all the parts will be stacked on top of each other - not very helpful.
                                        Make sure you're in "Footprint mode" <img src="media/pcbnew-footprint-mode.png" />, then right click in the black area and select "Global Spread and Place", then "Spread out All Footprints".
                                        </p>
                                    </section>
                                    <section>
                                        <p>
                                        In my experience, PCB layout is an iterative process.
                                        This time, we know the maximum dimensions based on the PCB supplier - it's cheaper if we can stay inside 5x5 cm - so let's start making a board outline.
                                        Pick the Edge.Cuts layer on the right hand side, then select the "Add Graphic Line or Polygon".
                                        </p>
                                        <img src="media/pcbnew-draw-edge.png" />
                                        <p>
                                        While getting the outline right, you might find it helpful to right-click on sections of the "drawing" (the outline) with the drawing tool selected.
                                        For example, the arc tool will create 90&deg; arcs by default, but those can be changed through the "Edit Drawing" context menu.
                                        </p>
                                    </section>
                                    <section>
                                        <p>
                                        Unfortunately, there's an error in the netlist generated - the gate pin on this FET should be pin 1, but we've got it connected to pin 2...
                                        </p>
                                        <img src="media/footprint-issue.png" />
                                    </section>
                                </section>
                                <section>
                                    <section>
                                        <h1>Pcbnew - Footprints</h1>
                                        <center><small>Slightly painful!</small></center>
                                        <p>
                                        Although KiCad has a large (and growing) libary of components available, we'll likely need to make some additions or changes.
                                        In doing this, it's important to understand the distinction between a "Library" and a ....

                                        </p>
                                    </section>
                                    <section>
                                        <p>
                                        Back in Eeschema, find the offending symbol.
                                        Right click, "Edit Component &gt; Edit Component in Library Editor"
                                        </p>
                                        <small>There's probably a better way to do this, but this works:</small>
                                        <ul>
                                            <li>Fix the part - in this case, change pin assignments by putting the cursor over the pin to change and pressing "e".
                                            <li>Save the current component to a new library.  Put the new library in the project folder if you intend to share it.
                                            <li>Close the Part Library Editor.
                                            <li>Back in Eeschema, "Preferences &gt; Component Libraries".
                                            <li>Click the <em>top</em> "Add" button and navigate your new library.
                                        </ul>
                                        <small>continues...</small>
                                    </section>
                                    <section>
                                        <ul>
                                            <li>Right click the symbol again, click "Edit", then click "Select" in the "Chip Name" box.
                                            <li>Press OK in the Edit dialog.  It may be hidden behind Eeschema (Mac only?).
                                            <li>Save, then re-export the netlist over the top of the last one.
                                            <li>Back in Pcbnew, import the netlist again.
                                        </ul>
                                    </section>
                                </section>
                                <section>
                                    <h1>General Notes</h1>
                                    <ul>
                                        <li>File formats used in KiCad are "plain text", so work nicely with revision control systems.
                                        <li>Presentation made with <a href="https://github.com/hakimel/reveal.js">reveal.js</a>
                                        <li><a href="http://kicad-pcb.org/">KiCad homepage</a>
                                        <li>Plenty resources on the net - eg this <a href="https://www.youtube.com/watch?v=zK3rDhJqMu0">YouTube video</a> or <a href="https://forum.kicad.info/">forums</a>.
                                    </ul>
                                </section>
				<section style="text-align: left;">
					<h1>THE END</h1>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
				//	{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				//	{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				//	{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/math/math.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
